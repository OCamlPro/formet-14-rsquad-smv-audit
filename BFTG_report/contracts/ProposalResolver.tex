
\chapter{Contract ProposalResolver}

\minitoc

\section{Overview}


In file {\tt ProposalResolver.sol}

\section{Variable Definitions}

\begin{lstlisting}[firstnumber=6]
    TvmCell _codeProposal;
\end{lstlisting}

\section{Public Method Definitions}


\subsection{Function resolveProposal}

\begin{itemize}
\item OK
\end{itemize}

\begin{lstlisting}[firstnumber=8]
    function resolveProposal(uint32 id) public view returns (address addrProposal) {
        TvmCell state = _buildProposalState(id);
        uint256 hashState = tvm.hash(state);
        addrProposal = address.makeAddrStd(0, hashState);
    }
\end{lstlisting}

\section{Internal Method Definitions}


\subsection{Function \_{}buildProposalState}

\begin{itemize}
\item Minor issue: this function should fail ({\tt require}) if the
  {\tt \_codeProposalFactory} variable has not yet been initialized. A global
  boolean could be used for that, set in an internal function
  initializing both global variables.
\end{itemize}

\begin{lstlisting}[firstnumber=14]
    function _buildProposalState(uint32 id) internal view returns (TvmCell) {
        return tvm.buildStateInit({
            contr: Proposal,
            varInit: {_deployer: address(this), _id: id},
            code: _codeProposal
        });
    }
\end{lstlisting}
